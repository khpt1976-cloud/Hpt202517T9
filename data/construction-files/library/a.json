{
  "id": "lib-1758231473856",
  "name": "a",
  "reportId": "rep-1758231440969",
  "reportName": "Nh·∫≠t k√Ω thi c√¥ng",
  "totalPages": 2,
  "currentPage": 1,
  "pagesContent": {
    "1": "<p>dsfaaaaaaaaaaaaaaaaaaa</p>",
    "2": "\n      <style>\n        table {\n          width: 100%;\n          border-collapse: separate;\n          border-spacing: 8px;\n        }\n        \n        .image-slot-cell {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          padding: 10px;\n          box-sizing: border-box;\n        }\n        \n        .image-slot-cell img {\n          width: auto;\n          height: auto;\n          max-width: 95%;\n          max-height: 95%;\n          object-fit: contain;\n          object-position: center;\n          border-radius: 4px;\n          display: block;\n          margin: 0 auto;\n        }\n      </style>\n      <div style=\"width: 100%; max-width: 210mm; margin: 0 auto; padding: 20px; font-family: Arial, sans-serif;\">\n        <div style=\"text-align: center; margin-bottom: 20px;\">\n          <!-- <h2 style=\"color: #1e40af; margin: 0 0 10px 0; font-size: 18px;\">B√°o c√°o thi c√¥ng</h2> -->\n          <p style=\"color: #64748b; margin: 0; font-size: 12px;\">Trang 2</p>\n          <!-- <h3 style=\"color: #374151; margin: 15px 0; font-size: 14px;\">H√¨nh ·∫£nh thi c√¥ng</h3> -->\n        </div>\n        \n        <table style=\"width: 100%; border-collapse: separate; border-spacing: 10px; margin: 20px auto;\">\n    <tr>\n          <td \n            class=\"image-slot-cell\"\n            style=\"\n          width: 80mm;\n          height: 120mm;\n          border: 3px dashed #3b82f6;\n          border-radius: 8px;\n          text-align: center;\n          vertical-align: middle;\n          cursor: pointer;\n          background: #f8fafc;\n          position: relative;\n          transition: all 0.2s ease;\n          overflow: visible;\n          padding: 5px;\n          box-sizing: border-box;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        \"\n            data-slot=\"0\"\n            data-page=\"2\"\n            data-mce-contenteditable=\"false\"\n            onclick=\"handleImageSlotClick(2, 0); return false;\"\n            onmouseover=\"this.style.borderColor='#1d4ed8'; this.style.transform='scale(1.02)'\"\n            onmouseout=\"this.style.borderColor='#3b82f6'; this.style.transform='scale(1)'\"\n            title=\"Click ƒë·ªÉ th√™m ·∫£nh 1\"\n          >\n        \n            <div style=\"\n              display: flex;\n              flex-direction: column;\n              align-items: center;\n              justify-content: center;\n              height: 100%;\n              color: #64748b;\n              font-size: 12px;\n              font-weight: 500;\n            \">\n              <div style=\"\n                width: 30px;\n                height: 30px;\n                border: 2px solid #3b82f6;\n                border-radius: 6px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: 18px;\n                color: #3b82f6;\n                font-weight: bold;\n                margin-bottom: 8px;\n              \">+</div>\n              <div>Click ƒë·ªÉ th√™m ·∫£nh</div>\n              <div style=\"font-size: 10px; margin-top: 4px; color: #94a3b8;\">·∫¢nh 1</div>\n            </div>\n          </td>\n          <td \n            class=\"image-slot-cell\"\n            style=\"\n          width: 80mm;\n          height: 120mm;\n          border: 3px dashed #3b82f6;\n          border-radius: 8px;\n          text-align: center;\n          vertical-align: middle;\n          cursor: pointer;\n          background: #f8fafc;\n          position: relative;\n          transition: all 0.2s ease;\n          overflow: visible;\n          padding: 5px;\n          box-sizing: border-box;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        \"\n            data-slot=\"1\"\n            data-page=\"2\"\n            data-mce-contenteditable=\"false\"\n            onclick=\"handleImageSlotClick(2, 1); return false;\"\n            onmouseover=\"this.style.borderColor='#1d4ed8'; this.style.transform='scale(1.02)'\"\n            onmouseout=\"this.style.borderColor='#3b82f6'; this.style.transform='scale(1)'\"\n            title=\"Click ƒë·ªÉ th√™m ·∫£nh 2\"\n          >\n        \n            <div style=\"\n              display: flex;\n              flex-direction: column;\n              align-items: center;\n              justify-content: center;\n              height: 100%;\n              color: #64748b;\n              font-size: 12px;\n              font-weight: 500;\n            \">\n              <div style=\"\n                width: 30px;\n                height: 30px;\n                border: 2px solid #3b82f6;\n                border-radius: 6px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: 18px;\n                color: #3b82f6;\n                font-weight: bold;\n                margin-bottom: 8px;\n              \">+</div>\n              <div>Click ƒë·ªÉ th√™m ·∫£nh</div>\n              <div style=\"font-size: 10px; margin-top: 4px; color: #94a3b8;\">·∫¢nh 2</div>\n            </div>\n          </td></tr><tr>\n          <td \n            class=\"image-slot-cell\"\n            style=\"\n          width: 80mm;\n          height: 120mm;\n          border: 3px dashed #3b82f6;\n          border-radius: 8px;\n          text-align: center;\n          vertical-align: middle;\n          cursor: pointer;\n          background: #f8fafc;\n          position: relative;\n          transition: all 0.2s ease;\n          overflow: visible;\n          padding: 5px;\n          box-sizing: border-box;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        \"\n            data-slot=\"2\"\n            data-page=\"2\"\n            data-mce-contenteditable=\"false\"\n            onclick=\"handleImageSlotClick(2, 2); return false;\"\n            onmouseover=\"this.style.borderColor='#1d4ed8'; this.style.transform='scale(1.02)'\"\n            onmouseout=\"this.style.borderColor='#3b82f6'; this.style.transform='scale(1)'\"\n            title=\"Click ƒë·ªÉ th√™m ·∫£nh 3\"\n          >\n        \n            <div style=\"\n              display: flex;\n              flex-direction: column;\n              align-items: center;\n              justify-content: center;\n              height: 100%;\n              color: #64748b;\n              font-size: 12px;\n              font-weight: 500;\n            \">\n              <div style=\"\n                width: 30px;\n                height: 30px;\n                border: 2px solid #3b82f6;\n                border-radius: 6px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: 18px;\n                color: #3b82f6;\n                font-weight: bold;\n                margin-bottom: 8px;\n              \">+</div>\n              <div>Click ƒë·ªÉ th√™m ·∫£nh</div>\n              <div style=\"font-size: 10px; margin-top: 4px; color: #94a3b8;\">·∫¢nh 3</div>\n            </div>\n          </td>\n          <td \n            class=\"image-slot-cell\"\n            style=\"\n          width: 80mm;\n          height: 120mm;\n          border: 3px dashed #3b82f6;\n          border-radius: 8px;\n          text-align: center;\n          vertical-align: middle;\n          cursor: pointer;\n          background: #f8fafc;\n          position: relative;\n          transition: all 0.2s ease;\n          overflow: visible;\n          padding: 5px;\n          box-sizing: border-box;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        \"\n            data-slot=\"3\"\n            data-page=\"2\"\n            data-mce-contenteditable=\"false\"\n            onclick=\"handleImageSlotClick(2, 3); return false;\"\n            onmouseover=\"this.style.borderColor='#1d4ed8'; this.style.transform='scale(1.02)'\"\n            onmouseout=\"this.style.borderColor='#3b82f6'; this.style.transform='scale(1)'\"\n            title=\"Click ƒë·ªÉ th√™m ·∫£nh 4\"\n          >\n        \n            <div style=\"\n              display: flex;\n              flex-direction: column;\n              align-items: center;\n              justify-content: center;\n              height: 100%;\n              color: #64748b;\n              font-size: 12px;\n              font-weight: 500;\n            \">\n              <div style=\"\n                width: 30px;\n                height: 30px;\n                border: 2px solid #3b82f6;\n                border-radius: 6px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                font-size: 18px;\n                color: #3b82f6;\n                font-weight: bold;\n                margin-bottom: 8px;\n              \">+</div>\n              <div>Click ƒë·ªÉ th√™m ·∫£nh</div>\n              <div style=\"font-size: 10px; margin-top: 4px; color: #94a3b8;\">·∫¢nh 4</div>\n            </div>\n          </td></tr>\n        </table>\n        \n        <div style=\"\n          text-align: center;\n          margin-top: 20px;\n          padding-top: 10px;\n          border-top: 1px solid #e2e8f0;\n          color: #64748b;\n          font-size: 11px;\n        \">\n          Trang 2 - 4 ·∫£nh (2 ·∫£nh/h√†ng) - 2 h√†ng\n        </div>\n        \n        <script>\n          console.log('üîß Image page script loaded for page 2');\n          \n          function handleImageSlotClick(pageNumber, slotIndex) {\n            console.log('üñºÔ∏è Image slot clicked:', pageNumber, slotIndex);\n            \n            // Show immediate feedback\n            alert('ƒêang m·ªü h·ªôp tho·∫°i ch·ªçn ·∫£nh...');\n            \n            // Try multiple ways to communicate with parent\n            try {\n              // Method 1: PostMessage to parent\n              if (window.parent && window.parent !== window) {\n                window.parent.postMessage({\n                  type: 'imageSlotClick',\n                  pageNumber: pageNumber,\n                  slotIndex: slotIndex\n                }, '*');\n              }\n              \n              // Method 2: Direct parent function call\n              if (window.parent && typeof window.parent.handleImageSlotClick === 'function') {\n                window.parent.handleImageSlotClick(pageNumber, slotIndex);\n              }\n              \n              // Method 3: TinyMCE specific\n              if (window.parent && window.parent.tinymce && window.parent.tinymce.activeEditor) {\n                const editor = window.parent.tinymce.activeEditor;\n                if (editor.windowManager) {\n                  // Trigger custom event\n                  editor.fire('imageSlotClick', { pageNumber, slotIndex });\n                }\n              }\n              \n              // Method 4: Direct file picker as fallback\n              setTimeout(function() {\n                const input = document.createElement('input');\n                input.type = 'file';\n                input.accept = 'image/*';\n                input.style.display = 'none';\n                document.body.appendChild(input);\n                \n                input.onchange = function(e) {\n                  const file = e.target.files[0];\n                  if (file) {\n                    console.log('üìÅ File selected:', file.name, 'Size:', file.size, 'Type:', file.type);\n                    \n                    // Validate file type\n                    if (!file.type.startsWith('image/')) {\n                      alert('Vui l√≤ng ch·ªçn file ·∫£nh!');\n                      document.body.removeChild(input);\n                      return;\n                    }\n                    \n                    // Validate file size (max 5MB)\n                    if (file.size > 5 * 1024 * 1024) {\n                      alert('File ·∫£nh qu√° l·ªõn! Vui l√≤ng ch·ªçn ·∫£nh nh·ªè h∆°n 5MB.');\n                      document.body.removeChild(input);\n                      return;\n                    }\n                    \n                    // Send file data to parent\n                    const reader = new FileReader();\n                    reader.onload = function(event) {\n                      const imageData = event.target.result;\n                      console.log('üìÑ Image data loaded, length:', imageData.length);\n                      \n                      if (window.parent && window.parent.postMessage) {\n                        console.log('üì§ Sending imageSelected message to parent');\n                        window.parent.postMessage({\n                          type: 'imageSelected',\n                          pageNumber: pageNumber,\n                          slotIndex: slotIndex,\n                          imageData: imageData,\n                          fileName: file.name\n                        }, '*');\n                      }\n                    };\n                    \n                    reader.onerror = function(error) {\n                      console.error('‚ùå Error reading file:', error);\n                      alert('L·ªói ƒë·ªçc file ·∫£nh!');\n                    };\n                    \n                    reader.readAsDataURL(file);\n                  }\n                  document.body.removeChild(input);\n                };\n                \n                input.click();\n              }, 100);\n              \n            } catch (error) {\n              console.error('Error handling image slot click:', error);\n            }\n          }\n          \n          // Setup click handlers when DOM is ready\n          document.addEventListener('DOMContentLoaded', function() {\n            console.log('üîß Setting up click listeners');\n            const cells = document.querySelectorAll('td[data-slot]');\n            cells.forEach(function(cell) {\n              cell.addEventListener('click', function(e) {\n                e.preventDefault();\n                e.stopPropagation();\n                const pageNum = parseInt(cell.getAttribute('data-page'));\n                const slotIdx = parseInt(cell.getAttribute('data-slot'));\n                console.log('üñ±Ô∏è Cell clicked:', pageNum, slotIdx);\n                handleImageSlotClick(pageNum, slotIdx);\n              });\n            });\n          });\n        </script>\n      </div>\n    "
  },
  "editorContent": "<p>dsfaaaaaaaaaaaaaaaaaaa</p>",
  "createdAt": "2025-09-18T21:37:53.856Z",
  "type": "library",
  "savedAt": "2025-09-18T21:37:52.969Z"
}